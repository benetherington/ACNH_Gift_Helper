import anvil.server
import anvil.google.auth, anvil.google.drive
from anvil.google.drive import app_files
import anvil.users
import anvil.tables as tables
import anvil.tables.query as q
from anvil.tables import app_tables

VERSION = '1.6'

# cached user object, defaulted to guest dict, but set to dict(user_row) when logged in
current_user = {'email': 'Guest',
                'villagers': [],
                'warned': False}

# cached cart quantity. Value of None indicates a guest mode, int indicates a logged-in user
cart_quantity = None

# quick-reference list of items names
item_names = ['3D glasses', 'birthday shades', 'bottom-rimmed glasses', 'browline glasses', 'butterfly shades', 'cyber shades', 'DAL eye mask', 'DAL sunglasses', 'double-bridge glasses', 'eye mask', 'eye patch', 'flower sunglasses', 'funny glasses', 'glass-bottle glasses', 'goggles', 'heart shades', 'HMD', 'Labelle sunglasses', 'ladder shades', 'masquerade mask', 'monocle', 'night-vision goggles', 'Nook Inc. eye mask', 'octagonal glasses', 'oval glasses', 'pilot shades', 'pixel shades', 'post-op patch', 'reflector', 'retro shades', 'rhinestone shades', 'rimmed glasses', 'round shades', 'round tinted shades', 'shattered glasses', 'ski goggles', 'sporty shades', 'square glasses', 'stache & glasses', 'star shades', 'steampunk glasses', 'superhero mask', 'tiny shades', 'tortoise specs', 'triangle shades', 'wooden-frame glasses', 'A tee', 'acid-washed jacket', 'after-school jacket', 'animal-print coat', 'animal-stripes tee', 'annyeong tee', 'anorak jacket', 'apron', 'Aran-knit cardigan', 'Aran-knit sweater', 'argyle sweater', 'argyle vest', 'athletic jacket', 'baggy shirt', 'baseball shirt', 'basketball tank', 'bear tee', 'big-star tee', 'biker jacket', 'blossom tee', 'boa blouson', 'boa fleece', 'bold aloha shirt', 'bomber-style jacket', 'bone tee', 'bonjour tee', 'botanical tee', 'bowling shirt', 'bug aloha shirt', 'bulldog jacket', 'business suitcoat', 'café uniform', 'camo bomber-style jacket', 'camo tee', 'camper tee', 'cardigan-shirt combo', 'career jacket', 'cavalier shirt', 'checkered chesterfield coat', 'checkered muffler', "chef's outfit", 'chesterfield coat', 'chick tee', 'Chimayo vest', 'ciao tee', 'coatigan', 'collarless coat', 'collarless shirt', 'college cardigan', 'color-block dress shirt', 'colorful striped sweater', "comedian's outfit", 'Coral Nook Inc. aloha shirt', 'coverall coat', 'cowboy shirt', 'cycling shirt', 'DAL apron', 'DAL pilot jacket', 'DAL tee', 'dance-team jacket', 'danger tank', 'denim jacket', 'denim vest', "detective's coat", 'diner apron', "doctor's coat", 'dolly shirt', 'dotted raincoat', 'doublet', 'down jacket', 'down ski jacket', 'dragon jacket', 'dreamy sweater', 'dress shirt', 'earbuds combo', 'eight-ball tee', 'emblem blazer', 'embroidered tank', 'energetic sweater', 'explorer shirt', 'faux-hair sweater', 'faux-shearling coat', 'fischerhemd', 'fish-print tee', 'fishing vest', 'fitness tank', 'five-ball tee', 'flame tee', 'flannel shirt', 'flashy cardigan', 'flashy jacket', 'flight jacket', 'flower sweater', 'folk shirt', 'football shirt', 'four-ball tee', 'frog tee', 'front-tie button-down shirt', 'front-tie tee', 'fuzzy vest', 'garden tank', 'gilet and shirt', 'gingham picnic shirt', 'gold-print tee', 'gown coat', 'graduation gown', 'Green Nook Inc. aloha shirt', 'groovy shirt', 'groovy tunic', 'guayabera shirt', 'guide shirt', 'gym tee', 'hallo tee', 'hand-knit tank', 'handmade cape', 'hanten jacket', 'happi tee', 'hawk jacket', 'heart apron', 'heart sweater', 'heavy-duty shirt', 'hello tee', 'henley shirt', 'hi tee', 'hip-wrap shirt', 'hoi tee', 'hola tee', 'holiday sweater', 'hula top', 'humble sweater', 'kanji tee', "kids' smock", 'konnichiwa tee', 'kung-fu tee', 'kurta', 'Labelle coat', 'Labelle knit shirt', 'lacy shirt', 'lacy tank', 'layered shirt', 'layered tank', 'leopard tee', 'letter jacket', 'madras plaid shirt', 'marble-dots tee', 'meme shirt', 'military uniform', 'misty tee', 'mod parka', "Mom's hand-knit sweater", "Mom's handmade apron", 'morning coat', 'mountain parka', 'multipurpose vest', 'muscle tank', 'music-fest shirt', 'MVP tee', 'ni hao tee', 'nine-ball tee', 'No. 1 shirt', 'No. 2 shirt', 'No. 3 shirt', 'No. 4 shirt', 'noble coat', 'Nook Inc. aloha shirt', 'Nook Inc. blouson', 'Nook Inc. tee', "nurse's jacket", 'nylon jacket', 'oilskin coat', 'OK Motors jacket', 'old-school jacket', 'one-ball tee', 'open-collar shirt', 'oversized shawl overshirt', 'parka undercoat', 'patchwork coat', 'peacoat', 'peasant blouse', 'pineapple aloha shirt', 'plaid puffed-sleeve shirt', 'pleather trench coat', 'plover cardigan', 'plushie-muffler coat', 'pocket tee', 'polo shirt', 'pom-pom sweater', 'poncho coat', 'poncho-style sweater', "prince's tunic", 'printed fleece sweater', 'printed layered shirt', 'printed-sleeve sweater', 'privét tee', 'puffy vest', 'puffy-sleeve blouse', 'pullover jacket', 'quilted down jacket', 'quilted jacket', 'rabbit tee', 'raglan shirt', 'rainbow sweater', 'raincoat', 'reindeer sweater', 'relay tank', 'retro coat', 'retro sweater', 'ribbon-straps tank', 'royal shirt', 'rubber apron', 'safety vest', 'sailor-style shirt', "sailor's tee", 'samurai shirt', 'school jacket', 'sea hanten shirt', 'seven-ball tee', 'shirt with camera', 'short peacoat', 'short-sleeve dress shirt', 'silk floral-print shirt', 'silk shirt', 'simple knit sweater', 'simple parka', 'simple-dots tee', 'six-ball tee', 'skiwear', 'skull tee', 'sleeved apron', 'sleeveless dress shirt', 'sleeveless parka', 'sleeveless tunic', 'snowflake sweater', 'snowy sweater', 'soccer-uniform top', 'space parka', 'sparkly embroidered tank', 'spider-web tee', 'sports tank', 'staff uniform', 'starry tank', 'striped shirt', 'striped tank', 'striped tee', "sushi chef's outfit", 'sweater on shirt', 'sweater-vest', 'sweatshirt', 'sweetheart tank and shirt', 'tailcoat', 'tailored jacket', 'tank', 'tee-parka combo', 'tennis sweater', 'terry-cloth nightgown', 'text shirt', 'thick-stripes shirt', "thief's costume", 'thread-worn sweater', 'three-ball tee', 'tie-dye shirt', 'tiger jacket', 'tight-knit sweater', 'top coat', 'track jacket', 'traditional straw coat', 'tree sweater', 'trench coat', 'tube top', 'tunic tank', 'tuxedo jacket', 'tweed jacket', 'tweed vest', 'two-ball tee', 'V-neck sweater', 'vampire costume', 'vertical-stripes shirt', 'vest with binoculars', 'viking top', 'waistcoat', 'western shirt', 'winter-solstice sweater', 'work apron', 'work shirt', "worker's jacket", 'workout top', 'yodel cardigan', 'yodel sweater', 'young-royal shirt', 'zigzag shirt', 'academy uniform', 'adventure dress', 'alpinist dress', 'alpinist overalls', 'ancient belted robe', 'ancient sashed robe', 'áo dài', 'apple dress', 'astro dress', 'attus robe', 'baby romper', 'baby-chick costume', 'baji jeogori', 'ballet outfit', 'balmacaan coat', 'baseball uniform', 'bath-towel wrap', 'bathrobe', 'bear costume', 'bekasab robe', 'belted dotted dress', 'bingata dress', 'blossom dress', 'blossoming kimono', 'boa parka', 'Bohemian tunic dress', 'bold muumuu', 'bolero coat', 'bone costume', 'box-skirt uniform', 'bunny dress', 'butterfly visiting kimono', 'cake dress', 'casual chic dress', 'casual kimono', 'cat dress', 'caterpillar costume', 'caveman tank', 'checkered jumper dress', 'cheerleading uniform', 'cherry dress', 'chic tuxedo dress', 'chima jeogori', 'china poblana', 'chiton', 'clover dress', 'cold-country bunad', 'cold-country dress', 'concierge uniform', 'coveralls with arm covers', 'cyber suit', 'dazed dress', 'denim overalls', 'desert outfit', 'desert-princess outfit', 'diner uniform', 'dollhouse dress', 'dragon suit', 'dreamy dress', 'earth-egg outfit', 'egg party dress', 'egg-sushi costume', 'elegant dress', 'fairy dress', 'fairy-tale dress', 'fancy kimono', 'fancy party dress', 'farmer overalls', 'fashionable royal dress', 'festive dress', 'festive-tree dress', 'figure-skating costume', 'figure-skating dress', 'firefighter uniform', 'fishing waders', 'flapper dress', 'flashy kimono', "fleece pj's", 'flight-crew uniform', 'floral lace dress', 'flower-print dress', 'folk-dance outfit', 'forest-print dress', 'frilly dress', 'frog costume', 'frugal dress', 'frugal outfit', 'full-body tights', 'full-length dress with pearls', 'gizzard-shad-sushi costume', 'gold armor', 'grape dress', 'gumdrop dress', 'hakama', 'hakama with crest', 'hibiscus muumuu', 'hot-dog costume', 'house-print dress', 'ice-hockey uniform', 'icy dress', 'impish costume', 'instant-muscles suit', 'iron armor', 'jester costume', 'jinbei', 'jockey uniform', 'judogi', 'jumper work suit', 'junihitoe kimono', 'kabuki-actor yukata', 'kandoora', 'kappa costume', 'kiwi dress', 'Labelle dress', 'lace-up dress', 'lacy dress', 'layered sleeveless dress', 'layered tank dress', 'leaf-egg outfit', 'linen dress', 'lively plaid dress', 'long chenille cardigan', 'long denim cardigan', 'long down coat', 'long pleather coat', 'loose fall dress', "mage's robe", 'magical dress', 'maid dress', 'marble-dots dress', 'marble-print dress', 'mariachi clothing', 'maxi shirtdress', 'miko attire', 'milkmaid dress', 'moldy dress', 'morning-glory yukata', 'mummy outfit', 'mysterious dress', 'nightgown', 'ninja costume', 'noble dress', 'noble zap suit', "nurse's dress uniform", 'office uniform', "old commoner's kimono", 'orange dress', 'overall dress', 'oversized print dress', 'oversized-sweats dress', "painter's coverall", 'pajama dress', 'palatial tank dress', 'parka and shirtdress', 'parka dress', 'peach dress', 'peacoat-and-skirt combo', 'pear dress', "pharaoh's outfit", "pilot's uniform", 'pinafore', 'pineapple dress', 'pintuck-pleated dress', 'PJ outfit', 'plaid-print dress', 'plover dress', 'power suit', 'prim outfit', 'princess dress', 'racing outfit', 'rad power skirt suit', 'Renaissance dress', 'retro A-line dress', 'retro dress', 'retro sleeveless dress', 'ruffled dress', 'rugby uniform', 'rumba costume', 'rumba dress', 'sailor-collar dress', 'sari', 'satin dress', 'school smock', 'security uniform', 'shawl-and-dress combo', 'sheep costume', 'shell dress', 'shirtdress', 'shorts outfit', 'simple checkered dress', 'simple visiting kimono', 'simple-dots dress', 'skirt with suspenders', 'sky-egg outfit', 'sleeveless shirtdress', 'sleeveless silk dress', 'sleeveless sweater dress', 'space suit', 'sprite costume', 'star costume', 'steampunk costume', 'stellar jumpsuit', 'stone-egg outfit', 'strawberry dress', 'striped dress', 'striped halter dress', 'striped maxi dress', 'stylish jumpsuit', 'suit of lights', 'suit with stand-up collar', 'sunflower dress', 'superhero uniform', 'suspender outfit', 'sweater dress', 'sweet dress', 'sweetheart dress', 'tango dress', 'tee dress', 'tiger-face tee dress', 'tight punk outfit', 'toga', 'tropical muumuu', 'tuna-sushi costume', 'tweed dress', 'Victorian dress', 'visual-punk dress', 'visual-punk outfit', 'water-egg outfit', 'watermelon dress', 'wedding tuxedo', "wizard's robe", 'wood-egg outfit', 'wrestler uniform', 'wrestling singlet', 'zap suit', 'zigzag-print dress', 'acorn knit cap', 'alpinist hat', 'ancient administrator hat', 'apple hat', 'Aran-knit cap', 'balloon hat', 'bamboo hat', 'barrette', 'baseball cap', 'beret', 'bicycle helmet', 'birthday hat', 'blue rose crown', 'bowler hat with ribbon', 'Bunny Day crown', 'bunny ears', "captain's hat", 'cavalier hat', "chef's hat", 'cherry hat', 'chic mum crown', 'chic rose crown', 'chic tulip crown', 'colorful striped knit cap', 'combat helmet', 'cool hyacinth crown', 'cool pansy crown', 'cool windflower crown', 'cosmos crown', 'crown', 'cute lily crown', 'cute rose crown', 'cycling cap', 'DAL cap', 'dandy hat', 'dark cosmos crown', 'dark lily crown', 'dark tulip crown', 'denim cap', 'detective hat', 'do-rag', 'dotted shower cap', 'earth-egg shell', 'egg party hat', 'eggshell', 'elder mask', 'elegant hat', "explorer's hat", 'faux-fur hat', 'fedora', 'flashy hairpin', 'floral hairpin', 'fox mask', 'frugal hat', 'giant ribbon', 'glengarry', 'gold rose crown', 'grape hat', 'halo', 'handmade crown', 'heart hairpin', 'hibiscus hairpin', 'hyacinth crown', 'imitation cow skull', "jester's cap", "jockey's helmet", 'kiwi hat', 'knit hat', 'Labelle cap', 'Labelle hat', 'leaf mask', 'leaf-egg shell', 'lettered cap', 'lily crown', 'lovely cosmos crown', "mage's hat", 'matanpushi', 'mesh cap', 'mum crown', "New Year's hat", "New Year's silk hat", 'Noh mask', 'Nook Inc. bandanna', 'Nook Inc. cap', "nurse's cap", 'OK Motors cap', 'orange hat', 'outback hat', 'outdoor hat', 'paisley bandanna', 'pansy crown', 'paperboy cap', 'patchwork tulip hat', 'peach hat', 'pear hat', "pilot's hat", 'pineapple cap', 'plain cap', 'police cap', 'pom casquette', 'purple hyacinth crown', 'purple pansy crown', 'purple windflower crown', 'rain hat', 'ribbon', 'ribboned garden hat', 'ribboned straw hat', 'rose crown', 'royal crown', 'safety helmet', "sailor's hat", "scholar's hat", 'school hat', 'shallow knit cap', 'silk hat', 'simple mum crown', 'skateboarding helmet', 'sky-egg shell', 'small silk hat', 'snowy knit cap', 'soft-serve hat', 'sombrero', 'sports cap', 'star hairpin', 'stone-egg shell', 'straw boater', 'straw hat', 'straw umbrella hat', 'strawberry hat', 'student cap', 'summer-solstice crown', 'sushi chef hat', 'swimming cap', "tam-o'-shanter", 'terry-cloth do-rag', 'terry-cloth nightcap', 'tiara', 'top hat', 'tropical hat', 'tubeteika', 'tulip crown', 'tulip hat', 'tweed cap', 'viking helmet', 'water-egg shell', 'watermelon hat', 'wide-brim straw hat', 'windflower crown', "wizard's cap", 'wood-egg shell', 'zen hair clip']
# we can alternatively build a list from app tables, but it slow.
# self.clothing_list = [ i['name'] for i in app_tables.items.search() ]

# quick-reference list of villager names
all_villagers_dict_list = [{'name': 'Admiral', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd06.png'}, {'name': 'Agent S', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ05.png'}, {'name': 'Agnes', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig17.png'}, {'name': 'Al', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor08.png'}, {'name': 'Alfonso', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/crd00.png'}, {'name': 'Alice', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal01.png'}, {'name': 'Alli', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/crd01.png'}, {'name': 'Amelia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr01.png'}, {'name': 'Anabelle', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ant03.png'}, {'name': 'Anchovy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd02.png'}, {'name': 'Angus', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bul00.png'}, {'name': 'Anicotti', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus10.png'}, {'name': 'Ankha', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat19.png'}, {'name': 'Annalisa', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ant08.png'}, {'name': 'Annalise', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs09.png'}, {'name': 'Antonio', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ant01.png'}, {'name': 'Apollo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr00.png'}, {'name': 'Apple', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ham01.png'}, {'name': 'Astrid', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kgr05.png'}, {'name': 'Audie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol12.png'}, {'name': 'Aurora', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn00.png'}, {'name': 'Ava', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn05.png'}, {'name': 'Avery', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr05.png'}, {'name': 'Axel', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp06.png'}, {'name': 'Baabara', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp01.png'}, {'name': 'Bam', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der01.png'}, {'name': 'Bangle', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/tig03.png'}, {'name': 'Barold', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr16.png'}, {'name': 'Bea', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog10.png'}, {'name': 'Beardo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea13.png'}, {'name': 'Beau', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der07.png'}, {'name': 'Becky', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn09.png'}, {'name': 'Bella', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus02.png'}, {'name': 'Benedict', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn01.png'}, {'name': 'Benjamin', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog16.png'}, {'name': 'Bertha', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hip03.png'}, {'name': 'Bettina', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus15.png'}, {'name': 'Bianca', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/tig06.png'}, {'name': 'Biff', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hip04.png'}, {'name': 'Big Top', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp02.png'}, {'name': 'Bill', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk00.png'}, {'name': 'Billy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/goa02.png'}, {'name': 'Biskit', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog03.png'}, {'name': 'Bitty', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hip05.png'}, {'name': 'Blaire', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ01.png'}, {'name': 'Blanche', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost08.png'}, {'name': 'Bluebear', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr00.png'}, {'name': 'Bob', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat00.png'}, {'name': 'Bonbon', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt17.png'}, {'name': 'Bones', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog04.png'}, {'name': 'Boomer', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn10.png'}, {'name': 'Boone', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor02.png'}, {'name': 'Boots', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/crd02.png'}, {'name': 'Boris', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig09.png'}, {'name': 'Boyd', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor05.png'}, {'name': 'Bree', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus03.png'}, {'name': 'Broccolo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus12.png'}, {'name': 'Broffina', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn12.png'}, {'name': 'Bruce', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der03.png'}, {'name': 'Bubbles', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hip02.png'}, {'name': 'Buck', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs00.png'}, {'name': 'Bud', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/lon00.png'}, {'name': 'Bunnie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt00.png'}, {'name': 'Butch', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog01.png'}, {'name': 'Buzz', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr03.png'}, {'name': 'Cally', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ11.png'}, {'name': 'Camofrog', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg03.png'}, {'name': 'Canberra', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal08.png'}, {'name': 'Candi', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus08.png'}, {'name': 'Carmen', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt16.png'}, {'name': 'Caroline', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ06.png'}, {'name': 'Carrie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kgr02.png'}, {'name': 'Cashmere', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp04.png'}, {'name': 'Celia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr09.png'}, {'name': 'Cesar', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor00.png'}, {'name': 'Chadder', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus18.png'}, {'name': 'Charlise', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea12.png'}, {'name': 'Cheri', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr10.png'}, {'name': 'Cherry', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog17.png'}, {'name': 'Chester', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr15.png'}, {'name': 'Chevre', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/goa00.png'}, {'name': 'Chief', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol00.png'}, {'name': 'Chops', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig14.png'}, {'name': 'Chow', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea03.png'}, {'name': 'Chrissy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt13.png'}, {'name': 'Claude', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt11.png'}, {'name': 'Claudia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/tig05.png'}, {'name': 'Clay', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ham05.png'}, {'name': 'Cleo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs07.png'}, {'name': 'Clyde', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs10.png'}, {'name': 'Coach', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bul07.png'}, {'name': 'Cobb', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig08.png'}, {'name': 'Coco', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt02.png'}, {'name': 'Cole', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt18.png'}, {'name': 'Colton', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs11.png'}, {'name': 'Cookie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog08.png'}, {'name': 'Cousteau', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg10.png'}, {'name': 'Cranston', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost06.png'}, {'name': 'Croque', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg17.png'}, {'name': 'Cube', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn02.png'}, {'name': 'Curlos', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp08.png'}, {'name': 'Curly', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig00.png'}, {'name': 'Curt', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea02.png'}, {'name': 'Cyd', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp12.png'}, {'name': 'Cyrano', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ant00.png'}, {'name': 'Daisy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog07.png'}, {'name': 'Deena', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk04.png'}, {'name': 'Deirdre', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der04.png'}, {'name': 'Del', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/crd04.png'}, {'name': 'Deli', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mnk08.png'}, {'name': 'Derwin', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk08.png'}, {'name': 'Diana', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der08.png'}, {'name': 'Diva', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg18.png'}, {'name': 'Dizzy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp01.png'}, {'name': 'Dobie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol04.png'}, {'name': 'Doc', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt10.png'}, {'name': 'Dom', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp15.png'}, {'name': 'Dora', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus00.png'}, {'name': 'Dotty', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt01.png'}, {'name': 'Drago', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/crd08.png'}, {'name': 'Drake', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk09.png'}, {'name': 'Drift', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg04.png'}, {'name': 'Ed', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs06.png'}, {'name': 'Egbert', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn02.png'}, {'name': 'Elise', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mnk05.png'}, {'name': 'Ellie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp07.png'}, {'name': 'Elmer', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs03.png'}, {'name': 'Eloise', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp03.png'}, {'name': 'Elvis', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/lon01.png'}, {'name': 'Erik', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der09.png'}, {'name': 'Eugene', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal10.png'}, {'name': 'Eunice', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp02.png'}, {'name': 'Fang', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol06.png'}, {'name': 'Fauna', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der00.png'}, {'name': 'Felicity', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat17.png'}, {'name': 'Filbert', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ02.png'}, {'name': 'Flip', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mnk06.png'}, {'name': 'Flo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn13.png'}, {'name': 'Flora', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost09.png'}, {'name': 'Flurry', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ham06.png'}, {'name': 'Francine', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt12.png'}, {'name': 'Frank', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr06.png'}, {'name': 'Freckles', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk07.png'}, {'name': 'Freya', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol05.png'}, {'name': 'Friga', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn04.png'}, {'name': 'Frita', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp11.png'}, {'name': 'Frobert', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg02.png'}, {'name': 'Fuchsia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der06.png'}, {'name': 'Gabi', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt05.png'}, {'name': 'Gala', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig13.png'}, {'name': 'Gaston', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt04.png'}, {'name': 'Gayle', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/crd07.png'}, {'name': 'Genji', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt08.png'}, {'name': 'Gigi', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg16.png'}, {'name': 'Gladys', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost01.png'}, {'name': 'Gloria', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk15.png'}, {'name': 'Goldie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog00.png'}, {'name': 'Gonzo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal04.png'}, {'name': 'Goose', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn00.png'}, {'name': 'Graham', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ham02.png'}, {'name': 'Greta', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus16.png'}, {'name': 'Grizzly', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea09.png'}, {'name': 'Groucho', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea06.png'}, {'name': 'Gruff', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/goa04.png'}, {'name': 'Gwen', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn05.png'}, {'name': 'Hamlet', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ham00.png'}, {'name': 'Hamphrey', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ham07.png'}, {'name': 'Hans', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor10.png'}, {'name': 'Harry', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hip08.png'}, {'name': 'Hazel', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ18.png'}, {'name': 'Henry', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg19.png'}, {'name': 'Hippeux', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hip09.png'}, {'name': 'Hopkins', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt14.png'}, {'name': 'Hopper', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn03.png'}, {'name': 'Hornsby', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rhn04.png'}, {'name': 'Huck', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg11.png'}, {'name': 'Hugh', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig03.png'}, {'name': 'Iggly', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn11.png'}, {'name': 'Ike', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea11.png'}, {'name': 'Jacob', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd11.png'}, {'name': 'Jacques', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd16.png'}, {'name': 'Jambette', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg13.png'}, {'name': 'Jay', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd00.png'}, {'name': 'Jeremiah', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg07.png'}, {'name': 'Jitters', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd04.png'}, {'name': 'Joey', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk01.png'}, {'name': 'Judy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr19.png'}, {'name': 'Julia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost05.png'}, {'name': 'Julian', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs13.png'}, {'name': 'June', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr13.png'}, {'name': 'Kabuki', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat09.png'}, {'name': 'Katt', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat21.png'}, {'name': 'Keaton', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr08.png'}, {'name': 'Ken', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn13.png'}, {'name': 'Ketchup', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk13.png'}, {'name': 'Kevin', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig15.png'}, {'name': 'Kid Cat', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat10.png'}, {'name': 'Kidd', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/goa07.png'}, {'name': 'Kiki', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat04.png'}, {'name': 'Kitt', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kgr00.png'}, {'name': 'Kitty', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat14.png'}, {'name': 'Klaus', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea14.png'}, {'name': 'Knox', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn11.png'}, {'name': 'Kody', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr04.png'}, {'name': 'Kyle', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol10.png'}, {'name': 'Leonardo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/tig04.png'}, {'name': 'Leopold', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/lon04.png'}, {'name': 'Lily', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg00.png'}, {'name': 'Limberg', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus01.png'}, {'name': 'Lionel', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/lon08.png'}, {'name': 'Lobo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol01.png'}, {'name': 'Lolly', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat18.png'}, {'name': 'Lopez', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der05.png'}, {'name': 'Louie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor04.png'}, {'name': 'Lucha', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd15.png'}, {'name': 'Lucky', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog02.png'}, {'name': 'Lucy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig04.png'}, {'name': 'Lyman', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal09.png'}, {'name': 'Mac', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog14.png'}, {'name': 'Maddie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog09.png'}, {'name': 'Maelle', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk03.png'}, {'name': 'Maggie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig10.png'}, {'name': 'Mallary', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk06.png'}, {'name': 'Maple', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr01.png'}, {'name': 'Marcel', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog15.png'}, {'name': 'Marcie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kgr10.png'}, {'name': 'Margie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp04.png'}, {'name': 'Marina', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ocp01.png'}, {'name': 'Marshal', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ17.png'}, {'name': 'Mathilda', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kgr01.png'}, {'name': 'Megan', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea15.png'}, {'name': 'Melba', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal02.png'}, {'name': 'Merengue', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rhn07.png'}, {'name': 'Merry', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat16.png'}, {'name': 'Midge', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd08.png'}, {'name': 'Mint', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ09.png'}, {'name': 'Mira', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt19.png'}, {'name': 'Miranda', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk12.png'}, {'name': 'Mitzi', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat01.png'}, {'name': 'Moe', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat08.png'}, {'name': 'Molly', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk16.png'}, {'name': 'Monique', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat11.png'}, {'name': 'Monty', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mnk04.png'}, {'name': 'Moose', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus14.png'}, {'name': 'Mott', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/lon06.png'}, {'name': 'Muffy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp12.png'}, {'name': 'Murphy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr07.png'}, {'name': 'Nan', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/goa01.png'}, {'name': 'Nana', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mnk01.png'}, {'name': 'Naomi', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cow07.png'}, {'name': 'Nate', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea05.png'}, {'name': 'Nibbles', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ04.png'}, {'name': 'Norma', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cow06.png'}, {'name': "O'Hare", 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt15.png'}, {'name': 'Octavian', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ocp00.png'}, {'name': 'Olaf', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ant09.png'}, {'name': 'Olive', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr09.png'}, {'name': 'Olivia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat03.png'}, {'name': 'Opal', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp00.png'}, {'name': 'Ozzie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal05.png'}, {'name': 'Pancetti', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig16.png'}, {'name': 'Pango', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ant02.png'}, {'name': 'Paolo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp05.png'}, {'name': 'Papi', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs12.png'}, {'name': 'Pashmina', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/goa08.png'}, {'name': 'Pate', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk02.png'}, {'name': 'Patty', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cow00.png'}, {'name': 'Paula', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea10.png'}, {'name': 'Peaches', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs08.png'}, {'name': 'Peanut', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ00.png'}, {'name': 'Pecan', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ03.png'}, {'name': 'Peck', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd17.png'}, {'name': 'Peewee', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor01.png'}, {'name': 'Peggy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig11.png'}, {'name': 'Pekoe', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr14.png'}, {'name': 'Penelope', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus17.png'}, {'name': 'Phil', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost07.png'}, {'name': 'Phoebe', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost10.png'}, {'name': 'Pierce', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr02.png'}, {'name': 'Pietro', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp13.png'}, {'name': 'Pinky', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea01.png'}, {'name': 'Piper', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd05.png'}, {'name': 'Pippy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt06.png'}, {'name': 'Plucky', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/chn10.png'}, {'name': 'Pompom', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk05.png'}, {'name': 'Poncho', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr02.png'}, {'name': 'Poppy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ15.png'}, {'name': 'Portia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog05.png'}, {'name': 'Prince', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg12.png'}, {'name': 'Puck', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn06.png'}, {'name': 'Puddles', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg06.png'}, {'name': 'Pudge', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr03.png'}, {'name': 'Punchy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat06.png'}, {'name': 'Purrl', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat07.png'}, {'name': 'Queenie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost00.png'}, {'name': 'Quillson', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk17.png'}, {'name': 'Raddle', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg15.png'}, {'name': 'Rasher', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig02.png'}, {'name': 'Raymond', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat23.png'}, {'name': 'Renée', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rhn08.png'}, {'name': 'Reneigh', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs16.png'}, {'name': 'Rex', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/lon02.png'}, {'name': 'Rhonda', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rhn01.png'}, {'name': 'Ribbot', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg01.png'}, {'name': 'Ricky', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ10.png'}, {'name': 'Rizzo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus09.png'}, {'name': 'Roald', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn01.png'}, {'name': 'Robin', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd01.png'}, {'name': 'Rocco', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hip00.png'}, {'name': 'Rocket', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor09.png'}, {'name': 'Rod', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus05.png'}, {'name': 'Rodeo', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bul01.png'}, {'name': 'Rodney', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ham03.png'}, {'name': 'Rolf', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/tig00.png'}, {'name': 'Rooney', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kgr09.png'}, {'name': 'Rory', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/lon07.png'}, {'name': 'Roscoe', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs04.png'}, {'name': 'Rosie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat02.png'}, {'name': 'Rowan', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/tig01.png'}, {'name': 'Ruby', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt09.png'}, {'name': 'Rudy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat20.png'}, {'name': 'Sally', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ07.png'}, {'name': 'Samson', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mus04.png'}, {'name': 'Sandy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost02.png'}, {'name': 'Savannah', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs02.png'}, {'name': 'Scoot', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk10.png'}, {'name': 'Shari', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mnk07.png'}, {'name': 'Sheldon', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ16.png'}, {'name': 'Shep', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog18.png'}, {'name': 'Sherb', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/goa09.png'}, {'name': 'Simon', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mnk02.png'}, {'name': 'Skye', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol09.png'}, {'name': 'Sly', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/crd06.png'}, {'name': 'Snake', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt03.png'}, {'name': 'Snooty', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ant06.png'}, {'name': 'Soleil', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ham04.png'}, {'name': 'Sparro', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd18.png'}, {'name': 'Spike', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rhn02.png'}, {'name': 'Spork', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig05.png'}, {'name': 'Sprinkle', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn14.png'}, {'name': 'Sprocket', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ost03.png'}, {'name': 'Static', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ08.png'}, {'name': 'Stella', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp03.png'}, {'name': 'Sterling', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pbr07.png'}, {'name': 'Stinky', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat13.png'}, {'name': 'Stitches', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr05.png'}, {'name': 'Stu', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bul03.png'}, {'name': 'Sydney', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal03.png'}, {'name': 'Sylvana', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ14.png'}, {'name': 'Sylvia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kgr06.png'}, {'name': 'T-Bone', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bul05.png'}, {'name': 'Tabby', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat12.png'}, {'name': 'Tad', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg09.png'}, {'name': 'Tammi', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/mnk03.png'}, {'name': 'Tammy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr17.png'}, {'name': 'Tangy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat05.png'}, {'name': 'Tank', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rhn00.png'}, {'name': 'Tasha', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/squ13.png'}, {'name': 'Teddy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea00.png'}, {'name': 'Tex', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn12.png'}, {'name': 'Tia', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp10.png'}, {'name': 'Tiffany', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/rbt07.png'}, {'name': 'Timbra', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp10.png'}, {'name': 'Tipper', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cow01.png'}, {'name': 'Tom', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cat15.png'}, {'name': 'Truffles', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pig01.png'}, {'name': 'Tucker', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/elp09.png'}, {'name': 'Tutu', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea07.png'}, {'name': 'Twiggy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/brd03.png'}, {'name': 'Tybalt', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/tig02.png'}, {'name': 'Ursala', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bea08.png'}, {'name': 'Velma', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/goa06.png'}, {'name': 'Vesta', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp00.png'}, {'name': 'Vic', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/bul08.png'}, {'name': 'Victoria', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs01.png'}, {'name': 'Violet', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/gor07.png'}, {'name': 'Vivian', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol08.png'}, {'name': 'Vladimir', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/cbr06.png'}, {'name': 'Wade', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/pgn09.png'}, {'name': 'Walker', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/dog06.png'}, {'name': 'Walt', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kgr08.png'}, {'name': 'Wart Jr.', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/flg05.png'}, {'name': 'Weber', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/duk11.png'}, {'name': 'Wendy', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp09.png'}, {'name': 'Whitney', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol03.png'}, {'name': 'Willow', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/shp07.png'}, {'name': 'Winnie', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/hrs05.png'}, {'name': 'Wolfgang', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/wol02.png'}, {'name': 'Yuka', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/kal00.png'}, {'name': 'Zell', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/der02.png'}, {'name': 'Zucker', 'icon_image': 'https://acnhcdn.com/latest/NpcIcon/ocp02.png'}]
# we can alternatively build a list from app tables, but it slow.
# self.all_villagers_dict_list = [ {'name': v['name'], 'icon_image': v['icon_image']} for v in app_tables.items.search() ]

def update_user_cache():
  # called by TitlebarUserDisplay on successful login and logout
  global current_user, cart_quantity
  current_user, cart_quantity = anvil.server.call_s('init_user_cache')

def current_user_is_guest():
  return cart_quantity is None
def current_user_is_not_guest():
  return not current_user_is_guest()

def assign_villager(villager, remove_from_profile):
  global current_user
  if current_user_is_guest():
    # in guest mode, we just work locally
    if isinstance(villager, str):
      # server assign_villager converts strings, but we're working locally
      villager_row = app_tables.villagers.get(name=villager)
    else:
      villager_row = villager
    if remove_from_profile:
      current_user['villagers'].remove(villager_row)
    else:
      current_user['villagers'] += [villager_row]
    # server sorts alphabetically, but again, working locally
    current_user['villagers'] = sorted(current_user['villagers'], key=lambda v: v['name'])
  else:
    # refresh cached object if not in guest mode
    server_data = anvil.server.call_s('assign_villager', villager, remove_from_profile)
    current_user = server_data
    
def current_user_villager_names():
  return [ v['name'] for v in current_user['villagers'] ]
  
  

    
    